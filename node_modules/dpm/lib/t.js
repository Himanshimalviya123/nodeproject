var colorized = require('console-colorjs');
var slice = [].slice;

var consoleLog = function(err) {
    console.log(colorized.fail(require('util').inspect(err)));
};

var noop = function() {};


module.exports = function(error) {
    if (!error) {
        error = consoleLog;
    }

    return function(success) {
        if (!success) {
            success = noop;
        }

        return function(err) {
            if (err) {
                error(err);
            } else {
                success.apply(null, slice.call(arguments, 1));
            }
        }
    };
};